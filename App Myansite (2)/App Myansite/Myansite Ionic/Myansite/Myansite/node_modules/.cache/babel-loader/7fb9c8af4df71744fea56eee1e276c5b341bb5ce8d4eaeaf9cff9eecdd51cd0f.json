{"ast":null,"code":"import { ref } from \"vue\";\nimport { createClient } from \"@supabase/supabase-js\";\nimport axios from \"axios\";\nimport \"@/assets/styles.css\";\nexport default {\n  __name: 'LoginView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const supabase = createClient(\"https://neffqwnqpcydidpkysfi.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5lZmZxd25xcGN5ZGlkcGt5c2ZpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3Nzc5MTUsImV4cCI6MjA3MjM1MzkxNX0.I_fwrJYMhKoh2Irlhqub3B5Kn4-JxuJR-XnLhGjUykw\");\n\n    // Estado\n    const vista = ref(\"home\");\n    const usuario = ref(\"\");\n    const correo = ref(\"\");\n    const contrasena = ref(\"\");\n    const noticias = ref([]);\n\n    // Registro\n    async function registrar() {\n      const {\n        error\n      } = await supabase.from(\"usuarios\").insert([{\n        nombre: usuario.value,\n        correo: correo.value,\n        contrasena: contrasena.value\n      }]);\n      if (error) alert(\"‚ùå Error: \" + error.message);else {\n        alert(\"‚úÖ Usuario registrado\");\n        vista.value = \"home\";\n      }\n    }\n\n    // Login\n    async function login() {\n      const {\n        data,\n        error\n      } = await supabase.from(\"usuarios\").select(\"*\").eq(\"correo\", correo.value).maybeSingle();\n      if (error) {\n        alert(\"‚ùå Error: \" + error.message);\n      } else if (!data) {\n        alert(\"‚ö†Ô∏è Usuario no encontrado\");\n      } else if (data.contrasena === contrasena.value) {\n        alert(\"üéâ Bienvenido \" + data.nombre);\n        localStorage.setItem(\"usuario\", JSON.stringify(data));\n        window.location.href = \"/contenido\";\n      } else {\n        alert(\"‚ö†Ô∏è Contrase√±a incorrecta\");\n      }\n    }\n\n    // Noticias Anime\n    async function mostrarNoticias() {\n      try {\n        const res = await axios.get(\"https://api.jikan.moe/v4/top/anime?limit=10\");\n        noticias.value = res.data.data;\n        vista.value = \"noticias\";\n      } catch (err) {\n        console.error(err);\n      }\n    }\n    const __returned__ = {\n      supabase,\n      vista,\n      usuario,\n      correo,\n      contrasena,\n      noticias,\n      registrar,\n      login,\n      mostrarNoticias,\n      ref,\n      get createClient() {\n        return createClient;\n      },\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","createClient","axios","supabase","vista","usuario","correo","contrasena","noticias","registrar","error","from","insert","nombre","value","alert","message","login","data","select","eq","maybeSingle","localStorage","setItem","JSON","stringify","window","location","href","mostrarNoticias","res","get","err","console"],"sources":["C:/Users/ellen/Downloads/App Myansite/Myansite Ionic/Myansite/Myansite/src/views/LoginView.vue"],"sourcesContent":["<template>\r\n  <header class=\"hero\"></header>\r\n\r\n  <main class=\"card\">\r\n    <!-- Home -->\r\n    <template v-if=\"vista==='home'\">\r\n      <h1>Bienvenido!!!</h1>\r\n      <p class=\"lead\">Myansite un lugar √∫nico donde el anime vive</p>\r\n      <div class=\"btn-group\">\r\n        <button class=\"btn\" @click=\"vista='login'\">Iniciar sesi√≥n!</button>\r\n        <button class=\"btn\" @click=\"vista='registro'\">Registro!</button>\r\n        <button class=\"btn\" @click=\"mostrarNoticias\">Noticias Anime!</button>\r\n      </div>\r\n    </template>\r\n\r\n    <!-- Login -->\r\n    <form v-if=\"vista==='login'\" @submit.prevent=\"login\">\r\n      <input type=\"email\" v-model=\"correo\" placeholder=\"Correo\" required />\r\n      <input type=\"password\" v-model=\"contrasena\" placeholder=\"Contrase√±a\" required />\r\n      <div class=\"form-btn-group\">\r\n        <button type=\"submit\" class=\"btn btn-primary\">Entrar</button>\r\n        <button type=\"button\" class=\"btn btn-outline\" @click=\"vista='home'\">Volver</button>\r\n      </div>\r\n    </form>\r\n\r\n    <!-- Registro -->\r\n    <form v-if=\"vista==='registro'\" @submit.prevent=\"registrar\">\r\n      <input type=\"text\" v-model=\"usuario\" placeholder=\"Usuario\" required />\r\n      <input type=\"email\" v-model=\"correo\" placeholder=\"Correo\" required />\r\n      <input type=\"password\" v-model=\"contrasena\" placeholder=\"Contrase√±a\" required />\r\n      <div class=\"form-btn-group\">\r\n        <button type=\"submit\" class=\"btn btn-primary\">Registrarse</button>\r\n        <button type=\"button\" class=\"btn btn-outline\" @click=\"vista='home'\">Volver</button>\r\n      </div>\r\n    </form>\r\n\r\n    <!-- Noticias -->\r\n    <div v-if=\"vista==='noticias'\">\r\n      <h2>Noticias de Anime</h2>\r\n      <div class=\"carousel-container\">\r\n        <div class=\"carousel-track\">\r\n          <div v-for=\"anime in noticias\" :key=\"anime.mal_id\" class=\"anime-card\">\r\n            <img :src=\"anime.images.jpg.large_image_url\" :alt=\"anime.title\" />\r\n            <h3>{{ anime.title }}</h3>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <button class=\"btn btn-outline\" @click=\"vista='home'\">Volver</button>\r\n    </div>\r\n  </main>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from \"vue\"\r\nimport { createClient } from \"@supabase/supabase-js\"\r\nimport axios from \"axios\"\r\nimport \"@/assets/styles.css\"\r\n\r\nconst supabase = createClient(\"https://neffqwnqpcydidpkysfi.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5lZmZxd25xcGN5ZGlkcGt5c2ZpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3Nzc5MTUsImV4cCI6MjA3MjM1MzkxNX0.I_fwrJYMhKoh2Irlhqub3B5Kn4-JxuJR-XnLhGjUykw\")\r\n\r\n// Estado\r\nconst vista = ref(\"home\")\r\nconst usuario = ref(\"\")\r\nconst correo = ref(\"\")\r\nconst contrasena = ref(\"\")\r\nconst noticias = ref([])\r\n\r\n// Registro\r\nasync function registrar() {\r\n  const { error } = await supabase.from(\"usuarios\").insert([\r\n    { nombre: usuario.value, correo: correo.value, contrasena: contrasena.value }\r\n  ])\r\n  if (error) alert(\"‚ùå Error: \" + error.message)\r\n  else {\r\n    alert(\"‚úÖ Usuario registrado\")\r\n    vista.value = \"home\"\r\n  }\r\n}\r\n\r\n// Login\r\nasync function login() {\r\n  const { data, error } = await supabase\r\n    .from(\"usuarios\")\r\n    .select(\"*\")\r\n    .eq(\"correo\", correo.value)\r\n    .maybeSingle()\r\n\r\n  if (error) {\r\n    alert(\"‚ùå Error: \" + error.message)\r\n  } else if (!data) {\r\n    alert(\"‚ö†Ô∏è Usuario no encontrado\")\r\n  } else if (data.contrasena === contrasena.value) {\r\n    alert(\"üéâ Bienvenido \" + data.nombre)\r\n    localStorage.setItem(\"usuario\", JSON.stringify(data))\r\n    window.location.href = \"/contenido\"\r\n  } else {\r\n    alert(\"‚ö†Ô∏è Contrase√±a incorrecta\")\r\n  }\r\n}\r\n\r\n// Noticias Anime\r\nasync function mostrarNoticias() {\r\n  try {\r\n    const res = await axios.get(\"https://api.jikan.moe/v4/top/anime?limit=10\")\r\n    noticias.value = res.data.data\r\n    vista.value = \"noticias\"\r\n  } catch (err) {\r\n    console.error(err)\r\n  }\r\n}\r\n</script>\r\n"],"mappings":"AAqDA,SAASA,GAAG,QAAQ,KAAK;AACzB,SAASC,YAAY,QAAQ,uBAAuB;AACpD,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAO,qBAAqB;;;;;;;IAE5B,MAAMC,QAAQ,GAAGF,YAAY,CAAC,0CAA0C,EAAE,kNAAkN,CAAC;;IAE7R;IACA,MAAMG,KAAK,GAAGJ,GAAG,CAAC,MAAM,CAAC;IACzB,MAAMK,OAAO,GAAGL,GAAG,CAAC,EAAE,CAAC;IACvB,MAAMM,MAAM,GAAGN,GAAG,CAAC,EAAE,CAAC;IACtB,MAAMO,UAAU,GAAGP,GAAG,CAAC,EAAE,CAAC;IAC1B,MAAMQ,QAAQ,GAAGR,GAAG,CAAC,EAAE,CAAC;;IAExB;IACA,eAAeS,SAASA,CAAA,EAAG;MACzB,MAAM;QAAEC;MAAM,CAAC,GAAG,MAAMP,QAAQ,CAACQ,IAAI,CAAC,UAAU,CAAC,CAACC,MAAM,CAAC,CACvD;QAAEC,MAAM,EAAER,OAAO,CAACS,KAAK;QAAER,MAAM,EAAEA,MAAM,CAACQ,KAAK;QAAEP,UAAU,EAAEA,UAAU,CAACO;MAAM,CAAC,CAC9E,CAAC;MACF,IAAIJ,KAAK,EAAEK,KAAK,CAAC,WAAW,GAAGL,KAAK,CAACM,OAAO,CAAC,MACxC;QACHD,KAAK,CAAC,sBAAsB,CAAC;QAC7BX,KAAK,CAACU,KAAK,GAAG,MAAM;MACtB;IACF;;IAEA;IACA,eAAeG,KAAKA,CAAA,EAAG;MACrB,MAAM;QAAEC,IAAI;QAAER;MAAM,CAAC,GAAG,MAAMP,QAAQ,CACnCQ,IAAI,CAAC,UAAU,CAAC,CAChBQ,MAAM,CAAC,GAAG,CAAC,CACXC,EAAE,CAAC,QAAQ,EAAEd,MAAM,CAACQ,KAAK,CAAC,CAC1BO,WAAW,CAAC,CAAC;MAEhB,IAAIX,KAAK,EAAE;QACTK,KAAK,CAAC,WAAW,GAAGL,KAAK,CAACM,OAAO,CAAC;MACpC,CAAC,MAAM,IAAI,CAACE,IAAI,EAAE;QAChBH,KAAK,CAAC,0BAA0B,CAAC;MACnC,CAAC,MAAM,IAAIG,IAAI,CAACX,UAAU,KAAKA,UAAU,CAACO,KAAK,EAAE;QAC/CC,KAAK,CAAC,gBAAgB,GAAGG,IAAI,CAACL,MAAM,CAAC;QACrCS,YAAY,CAACC,OAAO,CAAC,SAAS,EAAEC,IAAI,CAACC,SAAS,CAACP,IAAI,CAAC,CAAC;QACrDQ,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,YAAY;MACrC,CAAC,MAAM;QACLb,KAAK,CAAC,0BAA0B,CAAC;MACnC;IACF;;IAEA;IACA,eAAec,eAAeA,CAAA,EAAG;MAC/B,IAAI;QACF,MAAMC,GAAG,GAAG,MAAM5B,KAAK,CAAC6B,GAAG,CAAC,6CAA6C,CAAC;QAC1EvB,QAAQ,CAACM,KAAK,GAAGgB,GAAG,CAACZ,IAAI,CAACA,IAAI;QAC9Bd,KAAK,CAACU,KAAK,GAAG,UAAU;MAC1B,CAAC,CAAC,OAAOkB,GAAG,EAAE;QACZC,OAAO,CAACvB,KAAK,CAACsB,GAAG,CAAC;MACpB;IACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}