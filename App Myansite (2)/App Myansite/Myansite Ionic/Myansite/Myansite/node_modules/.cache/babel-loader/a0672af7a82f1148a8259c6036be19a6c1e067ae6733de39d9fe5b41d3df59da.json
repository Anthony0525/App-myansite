{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted } from \"vue\";\nimport { createClient } from \"@supabase/supabase-js\";\nimport { IonPage, IonContent } from \"@ionic/vue\";\nimport \"../assets/contenido.css\";\nconst limite = 5;\nexport default {\n  __name: 'ContenidoView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const supabase = createClient(\"https://neffqwnqpcydidpkysfi.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5lZmZxd25xcGN5ZGlkcGt5c2ZpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3Nzc5MTUsImV4cCI6MjA3MjM1MzkxNX0.I_fwrJYMhKoh2Irlhqub3B5Kn4-JxuJR-XnLhGjUykw\");\n    const publicaciones = ref([]);\n    const cargando = ref(false);\n    const pagina = ref(0);\n    async function cargarPublicaciones() {\n      cargando.value = true;\n      const {\n        data,\n        error\n      } = await supabase.from(\"publicaciones\").select(`id, nombre_publicacion, descripcion, media_url, perfiles (nombre_perfil, icono_url)`).order(\"created_at\", {\n        ascending: false\n      }).range(pagina.value * limite, (pagina.value + 1) * limite - 1);\n      cargando.value = false;\n      if (!error && data.length) {\n        publicaciones.value.push(...data);\n        pagina.value++;\n      }\n    }\n    function handleScroll() {\n      if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 100) {\n        cargarPublicaciones();\n      }\n    }\n    onMounted(() => {\n      cargarPublicaciones();\n      window.addEventListener(\"scroll\", handleScroll);\n    });\n    const __returned__ = {\n      supabase,\n      publicaciones,\n      cargando,\n      pagina,\n      limite,\n      cargarPublicaciones,\n      handleScroll,\n      ref,\n      onMounted,\n      get createClient() {\n        return createClient;\n      },\n      get IonPage() {\n        return IonPage;\n      },\n      get IonContent() {\n        return IonContent;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","createClient","IonPage","IonContent","limite","supabase","publicaciones","cargando","pagina","cargarPublicaciones","value","data","error","from","select","order","ascending","range","length","push","handleScroll","window","innerHeight","scrollY","document","body","offsetHeight","addEventListener"],"sources":["C:/Users/estudiante/Downloads/Myansite Ionic/Myansite/Myansite/src/views/ContenidoView.vue"],"sourcesContent":["<template>\r\n  <IonPage>\r\n    <IonContent>\r\n      <div class=\"container\">\r\n        <main class=\"main-content\">\r\n          <div v-for=\"pub in publicaciones\" :key=\"pub.id\" class=\"card\">\r\n            <div class=\"card-header\">\r\n              <img\r\n                :src=\"pub.perfiles?.icono_url || 'https://i.pravatar.cc/40'\"\r\n                class=\"perfil-icono\"\r\n              />\r\n              <span>{{ pub.perfiles?.nombre_perfil || \"An√≥nimo\" }}</span>\r\n            </div>\r\n            <h2>{{ pub.nombre_publicacion }}</h2>\r\n            <p>{{ pub.descripcion }}</p>\r\n            <img v-if=\"pub.media_url\" :src=\"pub.media_url\" class=\"media\" />\r\n          </div>\r\n        </main>\r\n\r\n        <aside class=\"sidebar\">\r\n          <div class=\"suggestions\">\r\n            <p class=\"suggestions-title\">Sugeridos!</p>\r\n            <div class=\"suggestions-list\">\r\n              <div\r\n                v-for=\"i in 6\"\r\n                :key=\"i\"\r\n                class=\"suggestion-icon\"\r\n                :style=\"`background-image:url(https://i.pravatar.cc/50?img=${i})`\"\r\n              ></div>\r\n            </div>\r\n          </div>\r\n        </aside>\r\n      </div>\r\n\r\n      <div v-if=\"cargando\" class=\"loader\">Cargando...</div>\r\n    </IonContent>\r\n  </IonPage>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from \"vue\"\r\nimport { createClient } from \"@supabase/supabase-js\"\r\nimport { IonPage, IonContent } from \"@ionic/vue\"\r\nimport \"../assets/contenido.css\"\r\n\r\nconst supabase = createClient(\r\n  \"https://neffqwnqpcydidpkysfi.supabase.co\",\r\n  \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5lZmZxd25xcGN5ZGlkcGt5c2ZpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3Nzc5MTUsImV4cCI6MjA3MjM1MzkxNX0.I_fwrJYMhKoh2Irlhqub3B5Kn4-JxuJR-XnLhGjUykw\"\r\n)\r\n\r\nconst publicaciones = ref([])\r\nconst cargando = ref(false)\r\nconst pagina = ref(0)\r\nconst limite = 5\r\n\r\nasync function cargarPublicaciones() {\r\n  cargando.value = true\r\n  const { data, error } = await supabase\r\n    .from(\"publicaciones\")\r\n    .select(\r\n      `id, nombre_publicacion, descripcion, media_url, perfiles (nombre_perfil, icono_url)`\r\n    )\r\n    .order(\"created_at\", { ascending: false })\r\n    .range(pagina.value * limite, (pagina.value + 1) * limite - 1)\r\n\r\n  cargando.value = false\r\n  if (!error && data.length) {\r\n    publicaciones.value.push(...data)\r\n    pagina.value++\r\n  }\r\n}\r\n\r\nfunction handleScroll() {\r\n  if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 100) {\r\n    cargarPublicaciones()\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  cargarPublicaciones()\r\n  window.addEventListener(\"scroll\", handleScroll)\r\n})\r\n</script>\r\n"],"mappings":";AAwCA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,SAASC,YAAY,QAAQ,uBAAuB;AACpD,SAASC,OAAO,EAAEC,UAAU,QAAQ,YAAY;AAChD,OAAO,yBAAyB;AAUhC,MAAMC,MAAM,GAAG,CAAC;;;;;;;IARhB,MAAMC,QAAQ,GAAGJ,YAAY,CAC3B,0CAA0C,EAC1C,kNACF,CAAC;IAED,MAAMK,aAAa,GAAGP,GAAG,CAAC,EAAE,CAAC;IAC7B,MAAMQ,QAAQ,GAAGR,GAAG,CAAC,KAAK,CAAC;IAC3B,MAAMS,MAAM,GAAGT,GAAG,CAAC,CAAC,CAAC;IAGrB,eAAeU,mBAAmBA,CAAA,EAAG;MACnCF,QAAQ,CAACG,KAAK,GAAG,IAAI;MACrB,MAAM;QAAEC,IAAI;QAAEC;MAAM,CAAC,GAAG,MAAMP,QAAQ,CACnCQ,IAAI,CAAC,eAAe,CAAC,CACrBC,MAAM,CACL,qFACF,CAAC,CACAC,KAAK,CAAC,YAAY,EAAE;QAAEC,SAAS,EAAE;MAAM,CAAC,CAAC,CACzCC,KAAK,CAACT,MAAM,CAACE,KAAK,GAAGN,MAAM,EAAE,CAACI,MAAM,CAACE,KAAK,GAAG,CAAC,IAAIN,MAAM,GAAG,CAAC,CAAC;MAEhEG,QAAQ,CAACG,KAAK,GAAG,KAAK;MACtB,IAAI,CAACE,KAAK,IAAID,IAAI,CAACO,MAAM,EAAE;QACzBZ,aAAa,CAACI,KAAK,CAACS,IAAI,CAAC,GAAGR,IAAI,CAAC;QACjCH,MAAM,CAACE,KAAK,EAAE;MAChB;IACF;IAEA,SAASU,YAAYA,CAAA,EAAG;MACtB,IAAIC,MAAM,CAACC,WAAW,GAAGD,MAAM,CAACE,OAAO,IAAIC,QAAQ,CAACC,IAAI,CAACC,YAAY,GAAG,GAAG,EAAE;QAC3EjB,mBAAmB,CAAC,CAAC;MACvB;IACF;IAEAT,SAAS,CAAC,MAAM;MACdS,mBAAmB,CAAC,CAAC;MACrBY,MAAM,CAACM,gBAAgB,CAAC,QAAQ,EAAEP,YAAY,CAAC;IACjD,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}